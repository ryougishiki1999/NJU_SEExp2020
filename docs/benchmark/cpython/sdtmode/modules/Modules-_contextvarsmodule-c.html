<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8"/>
        <title>Modules/_contextvarsmodule.c</title>
        <link rel="stylesheet" type="text/css" href="../css/prettyprint.css"/>
        <script type="text/javascript" src="../js/prettyprint.js"></script>
    </head>
    <body onload="prettyPrint()">
		<pre class="prettyprint lang-cpp linenums">
#include "Python.h"

#include "clinic/_contextvarsmodule.c.h"

/*[clinic input]
module _contextvars
[clinic start generated code]*/
/*[clinic end generated code: output=da39a3ee5e6b4b0d input=a0955718c8b8cea6]*/


/*[clinic input]
_contextvars.copy_context
[clinic start generated code]*/

static PyObject *
_contextvars_copy_context_impl(PyObject *module)
/*[clinic end generated code: output=1fcd5da7225c4fa9 input=89bb9ae485888440]*/
{
    return PyContext_CopyCurrent();
}


PyDoc_STRVAR(module_doc, "Context Variables");

static PyMethodDef _contextvars_methods[] = {
    _CONTEXTVARS_COPY_CONTEXT_METHODDEF
    {NULL, NULL}
};

static struct PyModuleDef _contextvarsmodule = {
    PyModuleDef_HEAD_INIT,      /* m_base */
    "_contextvars",             /* m_name */
    module_doc,                 /* m_doc */
    -1,                         /* m_size */
    _contextvars_methods,       /* m_methods */
    NULL,                       /* m_slots */
    NULL,                       /* m_traverse */
    NULL,                       /* m_clear */
    NULL,                       /* m_free */
};

PyMODINIT_FUNC
PyInit__contextvars(void)
{
    PyObject *m = PyModule_Create(&amp;_contextvarsmodule);
    if (m == NULL) {
        return NULL;
    }

    Py_INCREF(&amp;PyContext_Type);
    if (PyModule_AddObject(m, "Context",
                           (PyObject *)&amp;PyContext_Type) &lt; 0)
    {
        Py_DECREF(&amp;PyContext_Type);
        return NULL;
    }

    Py_INCREF(&amp;PyContextVar_Type);
    if (PyModule_AddObject(m, "ContextVar",
                           (PyObject *)&amp;PyContextVar_Type) &lt; 0)
    {
        Py_DECREF(&amp;PyContextVar_Type);
        return NULL;
    }

    Py_INCREF(&amp;PyContextToken_Type);
    if (PyModule_AddObject(m, "Token",
                           (PyObject *)&amp;PyContextToken_Type) &lt; 0)
    {
        Py_DECREF(&amp;PyContextToken_Type);
        return NULL;
    }

    return m;
}
      </pre>
    </body>
</html>
